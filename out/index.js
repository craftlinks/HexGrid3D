var U=function(){let b=[];for(let q=0;q<8;q++){const k=[];for(let u=0;u<8;u++)k.push(q==(u-3)%8?1:q==(u+1)%8?-1:q==u?1:0);b.push(k)}return b},V=function(b,q){if(b<0.2)return b/0.2-1;else if(0.2<=b&&b<=1)return q*(1-Math.abs(2*b-1-0.2)/0.8);else return 0},W=function(){for(let b=0;b<1500;b++){let q=0,k=0,u=0;for(let A=0;A<1500;A++){if(b==A)continue;let B=G[A]-G[b],D=H[A]-H[b],E=J[A]-J[b];if(Math.abs(B)>0.5)B=B-Math.sign(B);if(Math.abs(D)>0.5)D=D-Math.sign(D);if(Math.abs(E)>0.5)E=E-Math.sign(E);const I=Math.sqrt(B*B+D*D+E*E);if(I>0&&I<0.25){const Q=V(I/0.25,T[O[b]][O[A]]);q+=Q*B/I,k+=Q*D/I,u+=Q*E/I}}q*=1.25,k*=1.25,u*=1.25,K[b]=K[b]*S+q*0.01,L[b]=L[b]*S+k*0.01,N[b]=N[b]*S+u*0.01}for(let b=0;b<1500;b++)G[b]+=K[b]*0.01,H[b]+=L[b]*0.01,J[b]+=N[b]*0.01,G[b]=(G[b]+1)%1,H[b]=(H[b]+1)%1,J[b]=(J[b]+1)%1},$=function(b,q=1){for(let A=0;A<q;++A)W();const{width:k,height:u}=b.canvas;b.resetTransform(),b.clearRect(0,0,k,u),b.lineWidth=0.1,b.fillStyle="black",b.fillRect(0,0,k,u);for(let A=0;A<1500;++A){b.beginPath();const B=G[A]*k,D=H[A]*u;b.arc(B,D,6,0,Math.PI*2),b.fillStyle=`hsl(${O[A]*360/8}, 100%, 50%)`,b.fill(),b.stroke()}},M=function(b){let q=window.devicePixelRatio||1,k=b.getBoundingClientRect();b.width=k.width*q,b.height=k.height*q;let u=b.getContext("2d");return u.scale(q,q),u},P=function(){return M(document.querySelector("canvas"))};var S=Math.pow(0.5,0.25);var T=U();console.log(T);var O=new Int32Array(1500),G=new Float32Array(1500),H=new Float32Array(1500),J=new Float32Array(1500),K=new Float32Array(1500),L=new Float32Array(1500),N=new Float32Array(1500);for(let b=0;b<1500;b++)O[b]=Math.floor(Math.random()*8),G[b]=Math.random(),H[b]=Math.random(),J[b]=Math.random(),K[b]=0,L[b]=0,N[b]=0;var R=P();while(!0)$(R),await new Promise(requestAnimationFrame);
